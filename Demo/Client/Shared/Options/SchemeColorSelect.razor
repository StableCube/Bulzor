@namespace StableCube.Bulzor.Demo.Client

<div class="bul-control">
    <label class="bul-label">@Label</label>
    <BulInputSelect Value="(_selectedString)"
            ValueExpression="@( () => _selectedString )"
            ValueChanged="@( async (string value) => await OnChangedHandlerAsync(value) )">

        <option value="default" selected>Default</option>
        @foreach (var option in _options)
        {
            <option value="@(option.ToString())">@option.ToString()</option>
        }
    </BulInputSelect>
</div>

@code {
    [Parameter]
    public string Label { get; set; } = "Scheme Color";

    [Parameter]
    public BulSchemeColor? Value { get; set; }

    [Parameter]
    public EventCallback<BulSchemeColor?> ValueChanged { get; set; }

    private string _selectedString = "default";
    private IEnumerable<BulSchemeColor> _options;

    protected override void OnInitialized()
    {
        _options = Enum.GetValues(typeof(BulSchemeColor)).Cast<BulSchemeColor>();
    }

    public async Task OnChangedHandlerAsync(string value)
    {
        _selectedString = value;
        BulSchemeColor? enumVal = null;
        if(value != "default")
        {
            enumVal = Enum.Parse<BulSchemeColor>(value);
        }

        await ValueChanged.InvokeAsync(enumVal);
    }
}