@namespace StableCube.Bulzor.Components

<label class="@_class" disabled="@Disabled">
    <input type="checkbox" disabled="@Disabled" checked="@Value" @onchange="@(async (ChangeEventArgs args) => await ToggleHandlerAsync(args))" />
    @ChildContent
</label>

@code {
    [Parameter]
    public bool Value { get; set; }

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public EventCallback<bool> ValueChanged { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    private BulmaClassBuilder _classBuilder = new BulmaClassBuilder("checkbox");
    private string _class = String.Empty;

    protected override void OnParametersSet()
    {
        _class = _classBuilder.ToString();

        StateHasChanged();
    }

    public async Task ToggleHandlerAsync(ChangeEventArgs args)
    {
        Value = bool.Parse(args.Value.ToString());

        await ValueChanged.InvokeAsync(Value);

        StateHasChanged();
    }
}